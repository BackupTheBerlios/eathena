//Phracon Seller
prt_in.gat,56,69,4 script Miner 119,{
mes "[Miner]";
mes "Hello, Im selling metals I just mined.";
mes "They are Pharacon and Emvertacon.";
mes "Would you like to buy some?";
menu"Pharacon - 200z",PHARA,"Emveretarcon - 1000z",EMVER;

PHARA:
set @itemid,1010;
set @value,200;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

EMVER:
set @itemid,1011;
set @value,1000;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

NO:
mes "You do not have enough zeny!";
close;

FAIL:
mes "You cant hold that many of that item";
close;

BELOW:
mes "You have to buy a POSITIVE amount of items!";
close;
}

payon_in01.gat,84,26,4	script	Miner	88,{
mes "[Miner]";
mes "Hello, Im selling metals I just mined.";
mes "They are Pharacon and Emvertacon.";
mes "Would you like to buy some?";
menu"Pharacon - 200z",PHARA,"Emveretarcon - 1000z",EMVER;

PHARA:
set @itemid,1010;
set @value,200;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

EMVER:
set @itemid,1011;
set @value,1000;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

NO:
mes "You do not have enough zeny!";
close;

FAIL:
mes "You cant hold that many of that item";
close;

BELOW:
mes "You have to buy a POSITIVE amount of items!";
close;
}

morocc_in.gat,65,37,4	script	Miner	99,{
mes "[Miner]";
mes "Hello, Im selling metals I just mined.";
mes "They are Pharacon and Emvertacon.";
mes "Would you like to buy some?";
menu"Pharacon - 200z",PHARA,"Emveretarcon - 1000z",EMVER;

PHARA:
set @itemid,1010;
set @value,200;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

EMVER:
set @itemid,1011;
set @value,1000;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

NO:
mes "You do not have enough zeny!";
close;

FAIL:
mes "You cant hold that many of that item";
close;

BELOW:
mes "You have to buy a POSITIVE amount of items!";
close;
}

alberta_in.gat,18,59,5	script	Miner	84,{
mes "[Miner]";
mes "Hello, Im selling metals I just mined.";
mes "They are Pharacon and Emvertacon.";
mes "Would you like to buy some?";
menu"Pharacon - 200z",PHARA,"Emveretarcon - 1000z",EMVER;

PHARA:
set @itemid,1010;
set @value,200;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

EMVER:
set @itemid,1011;
set @value,1000;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

NO:
mes "You do not have enough zeny!";
close;

FAIL:
mes "You cant hold that many of that item";
close;

BELOW:
mes "You have to buy a POSITIVE amount of items!";
close;
}

//Yuno NPC @ 171 26

yuno_in01.gat,171,26,6	script	Miner	88,{

mes "[Miner]";
mes "Hello, Im selling metals I just mined.";
mes "They are Pharacon and Emvertacon.";
mes "Would you like to buy some?";
menu"Pharacon - 200z",PHARA,"Emveretarcon - 1000z",EMVER;

PHARA:
set @itemid,1010;
set @value,200;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

EMVER:
set @itemid,1011;
set @value,1000;
input @ammount;
if (@ammount <= 0) goto BELOW;
if (zeny<@value*@ammount) goto NO;
if (checkweight(@item,@amount) == 0) goto FAIL;
getitem 1010,@ammount;
set zeny,zeny-@value*@ammount;
close;

NO:
mes "You do not have enough zeny!";
close;

FAIL:
mes "You cant hold that many of that item";
close;

BELOW:
mes "You have to buy a POSITIVE amount of items!";
close;
}

//Ori/Elu Refiner
prt_in.gat,63,69,4	script	Dietrich	84,{
	mes "[Dietrich]";
	mes "If you bring Rough Oridecons and";
	mes "Rough Eluniums to me,";
	mes "I can refine them for you.";
	mes "However, you must bring 5 of each.";
	next;
	menu "Make Oridecon",Lori,"Make Elunium",L_MENU_1,"Ask about enchanted stones",L_MENU_2;
		Lori:
		if ((countitem(756) < 5)) goto L_START_1;
		delitem 756,5;
		getitem 984,1;
		mes "[Dietrich]";
		mes "As promised, here's your oridecon.";
		mes "Come back again anytime.";
		close;
	L_START_1:
		mes "[Dietrich]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an oridecon unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_1:
		if ((countitem(757) < 5)) goto L_START_2;
		delitem 757,5;
		getitem 985,1;
		mes "[Dietrich]";
		mes "As promised, here's your elunium.";
		mes "Come back again anytime.";
		close;
	L_START_2:
		mes "[Dietrich]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an elunium unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_2:
		mes "[Dietrich]";
		mes "Enchanted stones, huh ....";
		mes "Well, in 20 years of my life as a";
		mes "stonesmith I've heard of it many";
		mes "times...though I've never seen it before.";
		mes "What I heard is this: there are";
		mes "enchanted stones out there which";
		mes "possesses different elemental";
		mes "properties - Water, Earth, Fire, Wind.";
		next;
		mes "[Dietrich]";
		mes "If someone combines an Enchanted Stone";
		mes "with a weapon while smithing, that weapon";
		mes "will possess the same property as the stone.";
		mes "Of course, that person needs to be skillful";
		mes "enough to work on it.";
		close;
}

payon_in01.gat,81,31,4	script	Hakhim	88,{
	mes "[Hakhim]";
	mes "If you bring Rough Oridecons and";
	mes "Rough Eluniums to me,";
	mes "I can refine them for you.";
	mes "However, you must bring 5 of each.";
	next;
	menu "Make Oridecon",Lori,"Make Elunium",L_MENU_1,"Ask about enchanted stones",L_MENU_2;
		Lori:
		if ((countitem(756) < 5)) goto L_START_1;
		delitem 756,5;
		getitem 984,1;
		mes "[Dietrich]";
		mes "As promised, here's your oridecon.";
		mes "Come back again anytime.";
		close;
	L_START_1:
		mes "[Hakhim]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an oridecon unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_1:
		if ((countitem(757) < 5)) goto L_START_2;
		delitem 757,5;
		getitem 985,1;
		mes "[Dietrich]";
		mes "As promised, here's your elunium.";
		mes "Come back again anytime.";
		close;
	L_START_2:
		mes "[Hakhim]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an elunium unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_2:
		mes "[Hakhim]";
		mes "Enchanted stones, huh ....";
		mes "Well, in 20 years of my life as a";
		mes "stonesmith I've heard of it many";
		mes "times...though I've never seen it before.";
		mes "What I heard is this: there are";
		mes "enchanted stones out there which";
		mes "possesses different elemental";
		mes "properties - Water, Earth, Fire, Wind.";
		next;
		mes "[Hakhim]";
		mes "If someone combines an Enchanted Stone";
		mes "with a weapon while smithing, that weapon";
		mes "will possess the same property as the stone.";
		mes "Of course, that person needs to be skillful";
		mes "enough to work on it.";
		close;
}

morocc_in.gat,72,32,4	script	Abdul	99,{
	mes "[Abdul]";
	mes "If you bring Rough Oridecons and";
	mes "Rough Eluniums to me,";
	mes "I can refine them for you.";
	mes "However, you must bring 5 of each.";
	next;
	menu "Make Oridecon",Lori,"Make Elunium",L_MENU_1,"Ask about enchanted stones",L_MENU_2;
		Lori:
		if ((countitem(756) < 5)) goto L_START_1;
		delitem 756,5;
		getitem 984,1;
		mes "[Abdul]";
		mes "As promised, here's your oridecon.";
		mes "Come back again anytime.";
		close;
	L_START_1:
		mes "[Abdul]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an oridecon unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_1:
		if ((countitem(757) < 5)) goto L_START_2;
		delitem 757,5;
		getitem 985,1;
		mes "[Abdul]";
		mes "As promised, here's your elunium.";
		mes "Come back again anytime.";
		close;
	L_START_2:
		mes "[Abdul]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an elunium unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_2:
		mes "[Abdul]";
		mes "Enchanted stones, huh ....";
		mes "Well, in 20 years of my life as a";
		mes "stonesmith I've heard of it many";
		mes "times...though I've never seen it before.";
		mes "What I heard is this: there are";
		mes "enchanted stones out there which";
		mes "possesses different elemental";
		mes "properties - Water, Earth, Fire, Wind.";
		next;
		mes "[Abdul]";
		mes "If someone combines an Enchanted Stone";
		mes "with a weapon while smithing, that weapon";
		mes "will possess the same property as the stone.";
		mes "Of course, that person needs to be skillful";
		mes "enough to work on it.";
		close;
}

alberta_in.gat,21,63,5	script	Xenophon	84,{
	mes "[Xenophon]";
	mes "If you bring Rough Oridecons and";
	mes "Rough Eluniums to me,";
	mes "I can refine them for you.";
	mes "However, you must bring 5 of each.";
	next;
	menu "Make Oridecon",Lori,"Make Elunium",L_MENU_1,"Ask about enchanted stones",L_MENU_2;
		Lori:
		if ((countitem(756) < 5)) goto L_START_1;
		delitem 756,5;
		getitem 984,1;
		mes "[Dietrich]";
		mes "As promised, here's your oridecon.";
		mes "Come back again anytime.";
		close;
	L_START_1:
		mes "[Xenophon]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an oridecon unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_1:
		if ((countitem(757) < 5)) goto L_START_2;
		delitem 757,5;
		getitem 985,1;
		mes "[Xenophon]";
		mes "As promised, here's your elunium.";
		mes "Come back again anytime.";
		close;
	L_START_2:
		mes "[Xenophon]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an elunium unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_2:
		mes "[Xenophon]";
		mes "Enchanted stones, huh ....";
		mes "Well, in 20 years of my life as a";
		mes "stonesmith I've heard of it many";
		mes "times...though I've never seen it before.";
		mes "What I heard is this: there are";
		mes "enchanted stones out there which";
		mes "possesses different elemental";
		mes "properties - Water, Earth, Fire, Wind.";
		next;
		mes "[Xenophon]";
		mes "If someone combines an Enchanted Stone";
		mes "with a weapon while smithing, that weapon";
		mes "will possess the same property as the stone.";
		mes "Of course, that person needs to be skillful";
		mes "enough to work on it.";
		close;
}



yuno_in01.gat,171,22,6	script	Delayt	88,{

	mes "[Delayt]";
	mes "If you bring Rough Oridecons and";
	mes "Rough Eluniums to me,";
	mes "I can refine them for you.";
	mes "However, you must bring 5 of each.";
	next;
	menu "Make Oridecon",Lori,"Make Elunium",L_MENU_1,"Ask about enchanted stones",L_MENU_2;
		Lori:
		if ((countitem(756) < 5)) goto L_START_1;
		delitem 756,5;
		getitem 984,1;
		mes "[Dietrich]";
		mes "As promised, here's your oridecon.";
		mes "Come back again anytime.";
		close;
	L_START_1:
		mes "[Delayt]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an oridecon unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_1:
		if ((countitem(757) < 5)) goto L_START_2;
		delitem 757,5;
		getitem 985,1;
		mes "[Xenophon]";
		mes "As promised, here's your elunium.";
		mes "Come back again anytime.";
		close;
	L_START_2:
		mes "[Delayt]";
		mes "Huh? You're kidding, right?";
		mes "Didn't I say I can't make you";
		mes "an elunium unless you bring me";
		mes "5 rough ones.";
		close;
	L_MENU_2:
		mes "[Delayt]";
		mes "Enchanted stones, huh ....";
		mes "Well, in 20 years of my life as a";
		mes "stonesmith I've heard of it many";
		mes "times...though I've never seen it before.";
		mes "What I heard is this: there are";
		mes "enchanted stones out there which";
		mes "possesses different elemental";
		mes "properties - Water, Earth, Fire, Wind.";
		next;
		mes "[Delayt]";
		mes "If someone combines an Enchanted Stone";
		mes "with a weapon while smithing, that weapon";
		mes "will possess the same property as the stone.";
		mes "Of course, that person needs to be skillful";
		mes "enough to work on it.";
		close;
}


//Weapon/Armor Refiner
prt_in.gat,63,60,4	script	Hollgrehenn	85,{
mes "[Hollgrehenn]";
mes "Which would you like to refine?";
menu getequipname(1),PART1,
     getequipname(2),PART2,
     getequipname(3),PART3,
     getequipname(4),PART4,
     getequipname(5),PART5,
     getequipname(6),PART6,
     getequipname(7),PART7,
     getequipname(8),PART8,
     getequipname(9),PART9,
     getequipname(10),PART10;

PART1:
set @part,1;
if (getequipisequiped(1)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART2:
set @part,2;
if (getequipisequiped(2)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART3:
set @part,3;
if (getequipisequiped(3)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART4:
set @part,4;
if (getequipisequiped(4)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART5:
set @part,5;
if (getequipisequiped(5)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART6:
set @part,6;
if (getequipisequiped(6)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART7:
set @part,7;
if (getequipisequiped(7)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART8:
set @part,8;
if (getequipisequiped(8)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART9:
set @part,9;
if (getequipisequiped(9)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

PART10:
set @part,10;
if (getequipisequiped(10)) goto CHECK1;
mes "[Hollgrehenn]";
mes "You have nothing equipped in that spot!";
close;

CHECK1:
if (getequipisenableref(@part)) goto CHECK2;
mes "[Hollgrehenn]";
mes "You can not refine this!";
close;

CHECK2:
if (getequipisidentify(@part)) goto CHECK3;
mes "[Hollgrehenn]";
mes "This item is not identified!";
close;

CHECK3:
if (getequiprefinerycnt(@part) < 10) goto ARMOR_REFINE;
mes "[Hollgrehenn]";
mes "This item is already +10!";
close;

ARMOR_REFINE:
if (getequipweaponlv(@part) > 0) goto LEVEL1_REFINE;
mes "[Hollgrehenn]";
mes "This is an Armor";
mes "It will cost 2000 Zeny and a Elunium to refine it";
next;
if ((countitem(985) < 1) || (Zeny < 2000)) goto NO;
delitem 985,1;
set zeny,zeny-2000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) set @chance 60;
if (getequiprefinerycnt(@part) == 5) set @chance 40;
if (getequiprefinerycnt(@part) == 6) set @chance 40;
if (getequiprefinerycnt(@part) == 7) set @chance 20;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Hollgrehenn]";
mes "There you are!";
close;

LEVEL1_REFINE:
if (getequipweaponlv(@part) > 1) goto LEVEL2_REFINE;
mes "[Hollgrehenn]";
mes "This is an Level 1 Weapon";
mes "It will cost 50 Zeny and a Phracon to refine it";
next;
if ((countitem(1010) < 1) || (Zeny < 50)) goto NO;
delitem 1010,1;
set zeny,zeny-50;
set @chance,100;
if (getequiprefinerycnt(@part) == 7) set @chance 60;
if (getequiprefinerycnt(@part) == 8) set @chance 40;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Hollgrehenn]";
mes "There you are!";
close;

LEVEL2_REFINE:
if (getequipweaponlv(@part) > 2) goto LEVEL3_REFINE;
mes "[Hollgrehenn]";
mes "This is an Level 2 Weapon";
mes "It will cost 200 Zeny and a PEmveretarcon to refine it";
next;
if ((countitem(1011) < 1) || (Zeny < 200)) goto NO;
delitem 1011,1;
set zeny,zeny-200;
set @chance,100;
if (getequiprefinerycnt(@part) == 6) set @chance 60;
if (getequiprefinerycnt(@part) == 7) set @chance 40;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Hollgrehenn]";
mes "There you are!";
close;

LEVEL3_REFINE:
if (getequipweaponlv(@part) > 3) goto LEVEL4_REFINE;
mes "[Hollgrehenn]";
mes "This is an Level 3 Weapon";
mes "It will cost 5000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 5000)) goto NO;
delitem 984,1;
set zeny,zeny-5000;
set @chance,100;
if (getequiprefinerycnt(@part) == 5) goto set @chance 60;
if (getequiprefinerycnt(@part) == 6) goto set @chance 50;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Hollgrehenn]";
mes "There you are!";
close;

LEVEL4_REFINE:
if (getequipweaponlv(@part) < 4) goto LEVEL1_REFINE;
mes "[Hollgrehenn]";
mes "This is an Level 4 Weapon";
mes "It will cost 20000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 20000)) goto NO;
delitem 984,1;
set zeny,zeny-20000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) goto set @chance 60;
if (getequiprefinerycnt(@part) == 5) goto set @chance 40;
if (getequiprefinerycnt(@part) == 6) goto set @chance 40;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Hollgrehenn]";
mes "There you are!";
close;

NO:
mes "[Hollgrehenn]";
mes "You don't have enough zeny or the metal to refine this item!";
close;

FAILURE:
mes "[Hollgrehenn]";
mes "Sorry this piece of equipment is useless now, i failed";
failedrefitem @part;
close;
}

morocc_in.gat,73,38,4	script	Aragham	99,{
mes "[Aragham]";
mes "Which would you like to refine?";
menu getequipname(1),PART1,
     getequipname(2),PART2,
     getequipname(3),PART3,
     getequipname(4),PART4,
     getequipname(5),PART5,
     getequipname(6),PART6,
     getequipname(7),PART7,
     getequipname(8),PART8,
     getequipname(9),PART9,
     getequipname(10),PART10;

PART1:
set @part,1;
if (getequipisequiped(1)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART2:
set @part,2;
if (getequipisequiped(2)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART3:
set @part,3;
if (getequipisequiped(3)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART4:
set @part,4;
if (getequipisequiped(4)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART5:
set @part,5;
if (getequipisequiped(5)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART6:
set @part,6;
if (getequipisequiped(6)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART7:
set @part,7;
if (getequipisequiped(7)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART8:
set @part,8;
if (getequipisequiped(8)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART9:
set @part,9;
if (getequipisequiped(9)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

PART10:
set @part,10;
if (getequipisequiped(10)) goto CHECK1;
mes "[Aragham]";
mes "You have nothing equipped in that spot!";
close;

CHECK1:
if (getequipisenableref(@part)) goto CHECK2;
mes "[Aragham]";
mes "You can not refine this!";
close;

CHECK2:
if (getequipisidentify(@part)) goto CHECK3;
mes "[Aragham]";
mes "This item is not identified!";
close;

CHECK3:
if (getequiprefinerycnt(@part) < 10) goto ARMOR_REFINE;
mes "[Aragham]";
mes "This item is already +10!";
close;

ARMOR_REFINE:
if (getequipweaponlv(@part) > 0) goto LEVEL1_REFINE;
mes "[Aragham]";
mes "This is an Armor";
mes "It will cost 2000 Zeny and a Elunium to refine it";
next;
if ((countitem(985) < 1) || (Zeny < 2000)) goto NO;
delitem 985,1;
set zeny,zeny-2000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) set @chance 60;
if (getequiprefinerycnt(@part) == 5) set @chance 40;
if (getequiprefinerycnt(@part) == 6) set @chance 40;
if (getequiprefinerycnt(@part) == 7) set @chance 20;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Aragham]";
mes "There you are!";
close;

LEVEL1_REFINE:
if (getequipweaponlv(@part) > 1) goto LEVEL2_REFINE;
mes "[Aragham]";
mes "This is an Level 1 Weapon";
mes "It will cost 50 Zeny and a Phracon to refine it";
next;
if ((countitem(1010) < 1) || (Zeny < 50)) goto NO;
delitem 1010,1;
set zeny,zeny-50;
set @chance,100;
if (getequiprefinerycnt(@part) == 7) set @chance 60;
if (getequiprefinerycnt(@part) == 8) set @chance 40;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Aragham]";
mes "There you are!";
close;

LEVEL2_REFINE:
if (getequipweaponlv(@part) > 2) goto LEVEL3_REFINE;
mes "[Aragham]";
mes "This is an Level 2 Weapon";
mes "It will cost 200 Zeny and a PEmveretarcon to refine it";
next;
if ((countitem(1011) < 1) || (Zeny < 200)) goto NO;
delitem 1011,1;
set zeny,zeny-200;
set @chance,100;
if (getequiprefinerycnt(@part) == 6) set @chance 60;
if (getequiprefinerycnt(@part) == 7) set @chance 40;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Aragham]";
mes "There you are!";
close;

LEVEL3_REFINE:
if (getequipweaponlv(@part) > 3) goto LEVEL4_REFINE;
mes "[Aragham]";
mes "This is an Level 3 Weapon";
mes "It will cost 5000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 5000)) goto NO;
delitem 984,1;
set zeny,zeny-5000;
set @chance,100;
if (getequiprefinerycnt(@part) == 5) goto set @chance 60;
if (getequiprefinerycnt(@part) == 6) goto set @chance 50;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Aragham]";
mes "There you are!";
close;

LEVEL4_REFINE:
if (getequipweaponlv(@part) < 4) goto LEVEL1_REFINE;
mes "[Aragham]";
mes "This is an Level 4 Weapon";
mes "It will cost 20000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 20000)) goto NO;
delitem 984,1;
set zeny,zeny-20000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) goto set @chance 60;
if (getequiprefinerycnt(@part) == 5) goto set @chance 40;
if (getequiprefinerycnt(@part) == 6) goto set @chance 40;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Aragham]";
mes "There you are!";
close;

NO:
mes "[Aragham]";
mes "You don't have enough zeny or the metal to refine this item!";
close;

FAILURE:
mes "[Aragham]";
mes "Sorry this piece of equipment is useless now, i failed";
failedrefitem @part;
close;
}

payon_in01.gat,90,31,4	script	Antonio	88,{
mes "[Antonio]";
mes "Which would you like to refine?";
menu getequipname(1),PART1,
     getequipname(2),PART2,
     getequipname(3),PART3,
     getequipname(4),PART4,
     getequipname(5),PART5,
     getequipname(6),PART6,
     getequipname(7),PART7,
     getequipname(8),PART8,
     getequipname(9),PART9,
     getequipname(10),PART10;

PART1:
set @part,1;
if (getequipisequiped(1)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART2:
set @part,2;
if (getequipisequiped(2)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART3:
set @part,3;
if (getequipisequiped(3)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART4:
set @part,4;
if (getequipisequiped(4)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART5:
set @part,5;
if (getequipisequiped(5)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART6:
set @part,6;
if (getequipisequiped(6)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART7:
set @part,7;
if (getequipisequiped(7)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART8:
set @part,8;
if (getequipisequiped(8)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART9:
set @part,9;
if (getequipisequiped(9)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

PART10:
set @part,10;
if (getequipisequiped(10)) goto CHECK1;
mes "[Antonio]";
mes "You have nothing equipped in that spot!";
close;

CHECK1:
if (getequipisenableref(@part)) goto CHECK2;
mes "[Antonio]";
mes "You can not refine this!";
close;

CHECK2:
if (getequipisidentify(@part)) goto CHECK3;
mes "[Antonio]";
mes "This item is not identified!";
close;

CHECK3:
if (getequiprefinerycnt(@part) < 10) goto ARMOR_REFINE;
mes "[Antonio]";
mes "This item is already +10!";
close;

ARMOR_REFINE:
if (getequipweaponlv(@part) > 0) goto LEVEL1_REFINE;
mes "[Antonio]";
mes "This is an Armor";
mes "It will cost 2000 Zeny and a Elunium to refine it";
next;
if ((countitem(985) < 1) || (Zeny < 2000)) goto NO;
delitem 985,1;
set zeny,zeny-2000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) set @chance 60;
if (getequiprefinerycnt(@part) == 5) set @chance 40;
if (getequiprefinerycnt(@part) == 6) set @chance 40;
if (getequiprefinerycnt(@part) == 7) set @chance 20;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Antonio]";
mes "There you are!";
close;

LEVEL1_REFINE:
if (getequipweaponlv(@part) > 1) goto LEVEL2_REFINE;
mes "[Antonio]";
mes "This is an Level 1 Weapon";
mes "It will cost 50 Zeny and a Phracon to refine it";
next;
if ((countitem(1010) < 1) || (Zeny < 50)) goto NO;
delitem 1010,1;
set zeny,zeny-50;
set @chance,100;
if (getequiprefinerycnt(@part) == 7) set @chance 60;
if (getequiprefinerycnt(@part) == 8) set @chance 40;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Antonio]";
mes "There you are!";
close;

LEVEL2_REFINE:
if (getequipweaponlv(@part) > 2) goto LEVEL3_REFINE;
mes "[Antonio]";
mes "This is an Level 2 Weapon";
mes "It will cost 200 Zeny and a PEmveretarcon to refine it";
next;
if ((countitem(1011) < 1) || (Zeny < 200)) goto NO;
delitem 1011,1;
set zeny,zeny-200;
set @chance,100;
if (getequiprefinerycnt(@part) == 6) set @chance 60;
if (getequiprefinerycnt(@part) == 7) set @chance 40;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Antonio]";
mes "There you are!";
close;

LEVEL3_REFINE:
if (getequipweaponlv(@part) > 3) goto LEVEL4_REFINE;
mes "[Antonio]";
mes "This is an Level 3 Weapon";
mes "It will cost 5000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 5000)) goto NO;
delitem 984,1;
set zeny,zeny-5000;
set @chance,100;
if (getequiprefinerycnt(@part) == 5) goto set @chance 60;
if (getequiprefinerycnt(@part) == 6) goto set @chance 50;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Antonio]";
mes "There you are!";
close;

LEVEL4_REFINE:
if (getequipweaponlv(@part) < 4) goto LEVEL1_REFINE;
mes "[Antonio]";
mes "This is an Level 4 Weapon";
mes "It will cost 20000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 20000)) goto NO;
delitem 984,1;
set zeny,zeny-20000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) goto set @chance 60;
if (getequiprefinerycnt(@part) == 5) goto set @chance 40;
if (getequiprefinerycnt(@part) == 6) goto set @chance 40;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Antonio]";
mes "There you are!";
close;

NO:
mes "[Antonio]";
mes "You don't have enough zeny or the metal to refine this item!";
close;

FAILURE:
mes "[Antonio]";
mes "Sorry this piece of equipment is useless now, i failed";
failedrefitem @part;
close;
}

alberta_in.gat,28,58,4	script	Fredrik	85,{
mes "[Fredrik]";
mes "Which would you like to refine?";
menu getequipname(1),PART1,
     getequipname(2),PART2,
     getequipname(3),PART3,
     getequipname(4),PART4,
     getequipname(5),PART5,
     getequipname(6),PART6,
     getequipname(7),PART7,
     getequipname(8),PART8,
     getequipname(9),PART9,
     getequipname(10),PART10;

PART1:
set @part,1;
if (getequipisequiped(1)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART2:
set @part,2;
if (getequipisequiped(2)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART3:
set @part,3;
if (getequipisequiped(3)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART4:
set @part,4;
if (getequipisequiped(4)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART5:
set @part,5;
if (getequipisequiped(5)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART6:
set @part,6;
if (getequipisequiped(6)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART7:
set @part,7;
if (getequipisequiped(7)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART8:
set @part,8;
if (getequipisequiped(8)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART9:
set @part,9;
if (getequipisequiped(9)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

PART10:
set @part,10;
if (getequipisequiped(10)) goto CHECK1;
mes "[Fredrik]";
mes "You have nothing equipped in that spot!";
close;

CHECK1:
if (getequipisenableref(@part)) goto CHECK2;
mes "[Fredrik]";
mes "You can not refine this!";
close;

CHECK2:
if (getequipisidentify(@part)) goto CHECK3;
mes "[Fredrik]";
mes "This item is not identified!";
close;

CHECK3:
if (getequiprefinerycnt(@part) < 10) goto ARMOR_REFINE;
mes "[Fredrik]";
mes "This item is already +10!";
close;

ARMOR_REFINE:
if (getequipweaponlv(@part) > 0) goto LEVEL1_REFINE;
mes "[Fredrik]";
mes "This is an Armor";
mes "It will cost 2000 Zeny and a Elunium to refine it";
next;
if ((countitem(985) < 1) || (Zeny < 2000)) goto NO;
delitem 985,1;
set zeny,zeny-2000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) set @chance 60;
if (getequiprefinerycnt(@part) == 5) set @chance 40;
if (getequiprefinerycnt(@part) == 6) set @chance 40;
if (getequiprefinerycnt(@part) == 7) set @chance 20;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Fredrik]";
mes "There you are!";
close;

LEVEL1_REFINE:
if (getequipweaponlv(@part) > 1) goto LEVEL2_REFINE;
mes "[Fredrik]";
mes "This is an Level 1 Weapon";
mes "It will cost 50 Zeny and a Phracon to refine it";
next;
if ((countitem(1010) < 1) || (Zeny < 50)) goto NO;
delitem 1010,1;
set zeny,zeny-50;
set @chance,100;
if (getequiprefinerycnt(@part) == 7) set @chance 60;
if (getequiprefinerycnt(@part) == 8) set @chance 40;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Fredrik]";
mes "There you are!";
close;

LEVEL2_REFINE:
if (getequipweaponlv(@part) > 2) goto LEVEL3_REFINE;
mes "[Fredrik]";
mes "This is an Level 2 Weapon";
mes "It will cost 200 Zeny and a PEmveretarcon to refine it";
next;
if ((countitem(1011) < 1) || (Zeny < 200)) goto NO;
delitem 1011,1;
set zeny,zeny-200;
set @chance,100;
if (getequiprefinerycnt(@part) == 6) set @chance 60;
if (getequiprefinerycnt(@part) == 7) set @chance 40;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Fredrik]";
mes "There you are!";
close;

LEVEL3_REFINE:
if (getequipweaponlv(@part) > 3) goto LEVEL4_REFINE;
mes "[Fredrik]";
mes "This is an Level 3 Weapon";
mes "It will cost 5000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 5000)) goto NO;
delitem 984,1;
set zeny,zeny-5000;
set @chance,100;
if (getequiprefinerycnt(@part) == 5) goto set @chance 60;
if (getequiprefinerycnt(@part) == 6) goto set @chance 50;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Fredrik]";
mes "There you are!";
close;

LEVEL4_REFINE:
if (getequipweaponlv(@part) < 4) goto LEVEL1_REFINE;
mes "[Fredrik]";
mes "This is an Level 4 Weapon";
mes "It will cost 20000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 20000)) goto NO;
delitem 984,1;
set zeny,zeny-20000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) goto set @chance 60;
if (getequiprefinerycnt(@part) == 5) goto set @chance 40;
if (getequiprefinerycnt(@part) == 6) goto set @chance 40;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Fredrik]";
mes "There you are!";
close;

NO:
mes "[Fredrik]";
mes "You don't have enough zeny or the metal to refine this item!";
close;

FAILURE:
mes "[Fredrik]";
mes "Sorry this piece of equipment is useless now, i failed";
failedrefitem @part;
close;
}



yuno_in01.gat,164,26,6	script	Disturb	88,{
mes "[Disturb]";
mes "Which would you like to refine?";
menu getequipname(1),PART1,
     getequipname(2),PART2,
     getequipname(3),PART3,
     getequipname(4),PART4,
     getequipname(5),PART5,
     getequipname(6),PART6,
     getequipname(7),PART7,
     getequipname(8),PART8,
     getequipname(9),PART9,
     getequipname(10),PART10;

PART1:
set @part,1;
if (getequipisequiped(1)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART2:
set @part,2;
if (getequipisequiped(2)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART3:
set @part,3;
if (getequipisequiped(3)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART4:
set @part,4;
if (getequipisequiped(4)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART5:
set @part,5;
if (getequipisequiped(5)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART6:
set @part,6;
if (getequipisequiped(6)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART7:
set @part,7;
if (getequipisequiped(7)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART8:
set @part,8;
if (getequipisequiped(8)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART9:
set @part,9;
if (getequipisequiped(9)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

PART10:
set @part,10;
if (getequipisequiped(10)) goto CHECK1;
mes "[Disturb]";
mes "You have nothing equipped in that spot!";
close;

CHECK1:
if (getequipisenableref(@part)) goto CHECK2;
mes "[Disturb]";
mes "You can not refine this!";
close;

CHECK2:
if (getequipisidentify(@part)) goto CHECK3;
mes "[Disturb]";
mes "This item is not identified!";
close;

CHECK3:
if (getequiprefinerycnt(@part) < 10) goto ARMOR_REFINE;
mes "[Disturb]";
mes "This item is already +10!";
close;

ARMOR_REFINE:
if (getequipweaponlv(@part) > 0) goto LEVEL1_REFINE;
mes "[Disturb]";
mes "This is an Armor";
mes "It will cost 2000 Zeny and a Elunium to refine it";
next;
if ((countitem(985) < 1) || (Zeny < 2000)) goto NO;
delitem 985,1;
set zeny,zeny-2000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) set @chance 60;
if (getequiprefinerycnt(@part) == 5) set @chance 40;
if (getequiprefinerycnt(@part) == 6) set @chance 40;
if (getequiprefinerycnt(@part) == 7) set @chance 20;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Disturb]";
mes "There you are!";
close;

LEVEL1_REFINE:
if (getequipweaponlv(@part) > 1) goto LEVEL2_REFINE;
mes "[Disturb]";
mes "This is an Level 1 Weapon";
mes "It will cost 50 Zeny and a Phracon to refine it";
next;
if ((countitem(1010) < 1) || (Zeny < 50)) goto NO;
delitem 1010,1;
set zeny,zeny-50;
set @chance,100;
if (getequiprefinerycnt(@part) == 7) set @chance 60;
if (getequiprefinerycnt(@part) == 8) set @chance 40;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Disturb]";
mes "There you are!";
close;

LEVEL2_REFINE:
if (getequipweaponlv(@part) > 2) goto LEVEL3_REFINE;
mes "[Disturb]";
mes "This is an Level 2 Weapon";
mes "It will cost 200 Zeny and a PEmveretarcon to refine it";
next;
if ((countitem(1011) < 1) || (Zeny < 200)) goto NO;
delitem 1011,1;
set zeny,zeny-200;
set @chance,100;
if (getequiprefinerycnt(@part) == 6) set @chance 60;
if (getequiprefinerycnt(@part) == 7) set @chance 40;
if (getequiprefinerycnt(@part) == 8) set @chance 20;
if (getequiprefinerycnt(@part) == 9) set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Disturb]";
mes "There you are!";
close;

LEVEL3_REFINE:
if (getequipweaponlv(@part) > 3) goto LEVEL4_REFINE;
mes "[Disturb]";
mes "This is an Level 3 Weapon";
mes "It will cost 5000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 5000)) goto NO;
delitem 984,1;
set zeny,zeny-5000;
set @chance,100;
if (getequiprefinerycnt(@part) == 5) goto set @chance 60;
if (getequiprefinerycnt(@part) == 6) goto set @chance 50;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 20;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Disturb]";
mes "There you are!";
close;

LEVEL4_REFINE:
if (getequipweaponlv(@part) < 4) goto LEVEL1_REFINE;
mes "[Disturb]";
mes "This is an Level 4 Weapon";
mes "It will cost 20000 Zeny and a Oridecon to refine it";
next;
if ((countitem(984) < 1) || (Zeny < 20000)) goto NO;
delitem 984,1;
set zeny,zeny-20000;
set @chance,100;
if (getequiprefinerycnt(@part) == 4) goto set @chance 60;
if (getequiprefinerycnt(@part) == 5) goto set @chance 40;
if (getequiprefinerycnt(@part) == 6) goto set @chance 40;
if (getequiprefinerycnt(@part) == 7) goto set @chance 20;
if (getequiprefinerycnt(@part) == 8) goto set @chance 20;
if (getequiprefinerycnt(@part) == 9) goto set @chance 10;
set @rand,rand(100);
if (@rand > @chance) goto FAILURE;
successrefitem @part;
mes "[Disturb]";
mes "There you are!";
close;

NO:
mes "[Disturb]";
mes "You don't have enough zeny or the metal to refine this item!";
close;

FAILURE:
mes "[Disturb]";
mes "Sorry this piece of equipment is useless now, i failed";
failedrefitem @part;
close;
}

 
