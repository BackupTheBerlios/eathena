--------------------
//0780 by reia

・ペコペコの卵などが孵化するとノビになってしまう問題修正。
・GMコマンド「@kickall」が何時の間にか無効になっていたので修正。

	(/conf)
	atcommand_athena.conf 修正。
	(db/)
	mob_skill_db.txt 修正。
	(map/)
	atcommand.c
		atcommand_config_read() 修正。

--------------------
//0779 by あゆみ

・全スキル取得コマンドの追加。
	・GMで全スキルを覚えられるようにしている場合や、スキルの数が多い職業は一部のスキル表示がおかしくなります。その場合はリログして下さい。
	@allskill : 現在の職業で取得可能な全スキルを取得する。(クエストスキル含む)

	(conf/)
	battle_athena.conf 修正。
	help.txt 修正。
	(map/)
	atcommand.h 修正。
	atcommand.c
		atcommand() 修正。
	pc.h 修正。
	pc.c
		pc_allskillup() 追加。
	(doc/)
	conf_ref.txt 修正。
	help.txt 修正。

--------------------
//0778 by huge

・スペルブレイカーの修正
  ・キャスティングタイムの無いスキルには効かないように修正。
  ・使用された相手の消費SPの修正。

	(map/)
	skill.c
		skill_castend_nodamage_id() 修正。

--------------------
//0777 by ぴざまん

・ギルド攻城戦仮実装
　・基本的な部分だけしか実装してない上、いくつかの点で本鯖と相違があります。
　・攻城戦開始と終了は@コマンドで行います
	@gvgstart : 攻城戦開始
	@gvgend : 攻城戦終了
　・battle_athena.confに項目追加。
	(char/)
	int_guild.c
		inter_guild_init()、inter_guild_readdb()、inter_guild_save() 修正。
		inter_castle_save_sub()、mapif_guild_castle_info() 追加。
		mapif_guild_change_castle()、mapif_parse_GuildCastleInfo() 追加。
		mapif_parse_GuildChangeCastle() 追加。
	inter.c
		inter_config_read() 修正。
		inter_send_packet_length[]、inter_recv_packet_length[] 修正。
	int_guild.h 修正。
	(map/)
	atcommand.c
		atcommand()、atcommand_config_read() 修正。
	battle.c
		battle_config_read() 修正。
	guild.c
		guild_castle_search()、guild_read_castledb()追加。
		do_init_guild() 修正。
		guild_gvg_init()、guild_gvg_final()、guild_gvg_final_sub() 追加。
		guild_gvg_eliminate()、guild_gvg_eliminate_sub() 追加。
		guild_gvg_eliminate_timer()、guild_gvg_empelium_pos() 追加。
		guild_gvg_break_empelium() 追加。
	intif.c
		intif_parse()、packet_len_table[] 修正。
		intif_parse_GuildCastleInfo()、intif_parse_GuildCastleChange() 追加。
		intif_guild_castle_info()、intif_guild_castle_change() 追加。
	mob.c
		mob_damage() 修正。
	atcommand.h 修正。
	battle.h 修正。
	guild.h 修正。
	intif.h 修正。
	mob.h 修正。
	(common/)
	mmo.h 修正。
	(conf/)
	battle_athena.conf 修正。
	inter_athena.conf 修正。
	msg_athena.conf 修正。
	atcommand_athena.conf 修正。
	(db/)
	castle_db.txt 追加。
--------------------
//0776 by 死神

・NPCスキル孵化実装。(mob_skill_db.txtのval1を使います。)
・mob_skill_db.txtの確率を千分率から万分率に変更。(ただmob_skill_db.txtの修正はしてません。)
・モンスターがダブルアタックする問題修正。(修正されたかどうかの自信はありませんが...)
・その他細かい修正。
	(db/)
	mob_skill_db.txt 修正。
	skill_db.txt 修正。
	(map/)
	map.h 修正。
	mob.h 修正。
	mob.c
		mob_spawn_dataset()、mob_spawn() 修正。
		mob_changestate()、mobskill_use() 修正。
		mob_class_change() 追加。
	npc.c
		npc_parse_mob() 修正。
	battle.c
		battle_check_target() 修正。
	clif.h 修正。
	clif.c
		clif_mob_class_change() 追加。
	skill.c
		skill_castend_nodamage_id() 修正。

--------------------
//0775 by 死神

・シーズモードの処理修正。
・シーズモードの無敵時間の間はどんな攻撃も受けないように修正。
・シーズモードの無敵時間が時間切れになる前には解除されないように修正。
・battle_athena.confに項目追加。
・@hideや/hideによるGMハイディング中は自分に自動使用されるスキル以外のスキル使用や攻撃を受けないように修正。
・ハイディング中地属性スキル以外の攻撃を受けないように修正。(トラップやクァグマイア等のスキルは影響を受けるかどうか不明なので今までと同じように影響を受けるように処理。)
・トンネルドライブの移動速度を本鯖に合わせました。
・その他バグ修正や細かい修正。(殆ど未テスト)
	(conf/)
	battle_athena.conf 修正。
	(doc/)
	conf_ref.txt 修正。
	(map/)
	battle.h 修正。
	battle.c
		battle_check_target()、battle_calc_damage() 修正。
		battle_calc_pet_weapon_attack()、battle_calc_mob_weapon_attack() 修正。
		battle_calc_pc_weapon_attack()、battle_calc_magic_attack() 修正。
		battle_calc_misc_attack() 修正。
		battle_config_read()、battle_weapon_attack() 修正。
	pc.h 修正。
	pc.c
		do_init_pc()、pc_authok() 修正。
		pc_attack()、pc_attack_timer() 修正。
		pc_setgvg_ghosttimer()、pc_delgvg_ghosttimer()を
			pc_setgvginvincibletimer()、pc_delgvginvincibletimer()に修正。
		pc_gvg_invincible_timer() 追加。
		pc_attack_timer()、pc_steal_item()、pc_calcstatus() 修正。
	clif.c
		clif_parse_ActionRequest()、clif_parse_UseItem() 修正。
		clif_parse_UseSkillToId()、clif_parse_UseSkillToPos() 修正。
		clif_parse_UseSkillMap()、clif_parse_WalkToXY() 修正。
	map.h 修正。
	map.c
		map_quit() 修正。
	mob.c
		mob_attack()、mob_target()、mob_ai_sub_hard_activesearch() 修正。
		mob_ai_sub_hard_mastersearch()、mob_ai_sub_hard() 修正。
		mob_damage()、mobskill_castend_id()、mobskill_castend_pos() 修正。
	skill.c
		skill_castend_damage_id()、skill_attack() 修正。
		skill_castend_id()、skill_castend_pos()、skill_castend_map() 修正。

--------------------
//0774 by 獅子o^.^o
・Monk job bouns 修正
・ドケビ 修正
(db/)
	job_db2.txt 修正
	pet_db.txt 修正

--------------------
//0773 by 聖

・細かいバグ修正
	(map/)
	skill.c 修正。
	battle.c 修正。

--------------------
//0772 by ぴざまん

・シーズモード下で以下の点を修正
　・連続して攻撃できなくなっていたバグ修正
　・ダメージ軽減率が正しく設定できなかったバグ修正
　・無敵時間実装。battle_athena.confのgvg_ghost_timeで設定できます

・ハイディングで魔法攻撃等を回避できなかったバグ修正

	(map/)
	skill.c
		skill_attack()、skill_unit_onplace()、skill_check_condition() 修正。
	clif.c
		clif_parse_ActionRequest()、clif_parse_UseItem() 修正。
		clif_parse_UseSkillToId()、clif_parse_UseSkillToPos() 修正。
		clif_parse_UseSkillMap()、clif_parse_WalkToXY() 修正。
	pc.c
		do_init_pc()、pc_authok() 修正。
		pc_attack()、pc_attack_timer() 修正。
		pc_setgvg_ghosttimer()、pc_delgvg_ghosttimer() 追加。
		pc_gvg_ghost_timer() 追加。
	map.c
		map_quit() 修正
	battle.c
		battle_config_read()、battle_weapon_attack() 修正。
	battle.h 修正。
	pc.h 修正。

--------------------
//0771 by huge

・スペルブレイカー実装
	(map/)
	skill.c
		skill_castend_nodamage_id() 修正。
	(db/)
	skill_db.txt 修正。

--------------------
//0770 by 聖

・青箱系の処理変更
・その他バグ修正
	(map/)
	battle.c 修正。
	itemdb.c 修正。
	mob.c 修正。
	script.c 修正。

--------------------
//0769 by 死神

・シーズモード修正。
・無敵時間の方はghost_timer以外の方法で実装するつもりなので今は削除しています。
・スクリプトviewpointが正しく動作しない問題修正。
・produce_db.txtを修正。(乳鉢はskill_require_db.txtで処理しています。そしてアイテムの数を0にすれば消耗はされないけど作る時必要なアイテムになります。)
・その他細かい修正。
	(conf/)
	battle_athena.conf 修正。
	(doc/)
	conf_ref.txt 修正。
	(db/)
	produce_db.txt 修正。
	(map/)
	battle.h 修正。
	battle.c
		battle_calc_damage()、battle_calc_weapon_attack() 修正。
		battle_calc_pet_weapon_attack()、battle_calc_mob_weapon_attack() 修正。
		battle_calc_pc_weapon_attack()、battle_calc_magic_attack() 修正。
		battle_calc_misc_attack()、battle_check_target()、battle_config_read() 修正。
	skill.c
		skill_unit_onplace()、skill_castend_damage_id()、skill_castend_id() 修正。
		skill_use_id()、skill_use_pos()、skill_check_condition() 修正。
		skill_can_produce_mix() 修正。
	pc.c
		pc_attack_timer()、pc_attack()、pc_isUseitem()、pc_delitem() 修正。
		pc_damage() 修正。
	mob.c
		mob_damage()、mobskill_use_id()、mobskill_use_pos() 修正。
	script.c
		buildin_viewpoint()、buildin_emotion() 修正。
	makefile 修正。

--------------------
//0768 by ぴざまん

・シーズモード下で、以下の点を修正
　・死亡したらセーブポイントに強制送還するように修正
　・特定のアイテムが使用できないように修正(アンティペインメント・ハエの羽)
　・特定のスキルが使用できないように修正(ワープポータル・バックステップ・インティミデイト・テレポート・インデュア)
　・同盟ギルドには無条件で攻撃できないように修正
　・敵対ギルドには無条件で攻撃できるように修正
　・無敵時間中は両者とも攻撃できないように修正

ソースレベルでテレポ、ハエの使用を禁じているため攻城戦MAPのmapflagにnoteleportは必要ありません
また、無敵時間はghost_timer依存です。つまりbattle_athena.conf内のghost_timeが無敵時間になります

	(map/)
	skill.c
		skill_castend_damage_id()、skill_castend_id() 修正
		skill_check_condition() 修正
	pc.c
		pc_damage() 修正
	battle.c
		battle_weapon_attack() 修正

--------------------
//0767 by huge

・ファーマシーで、製造の書が減る問題を修正
・武器製造DBで、いくつか抜けていたのを修正

	(map/)
	skill.c 修正。
	(db/)
	produce_db.txt 修正。

--------------------
//0766 by ぴざまん

・シーズモード下で、以下の点を修正
　・正規ギルド承認がないとエンペリウムに攻撃が効かないように修正
　・エンペリウムに対するスキル攻撃が効かないように修正
　・魔法攻撃、遠距離攻撃、罠のダメージ補正を実装
　　魔法攻撃：50%　遠距離攻撃：75%　罠：60%
　　これは人にもエンペリウムにも適用されます
	(map/)
	battle.c
		#include "guild.h" 追加
		battle_calc_damage()、battle_calc_weapon_attack() 修正

--------------------
//0765 by ぴざまん

・装備制限実装
・装備制限がかかった装備品は該当マップに移動した際に自動的に装備が外れ、
　再装備もできなくなります
・制限できるのは装備品のみです。カード類は制限できません
	(db/)
	item_noequip.txt 追加
	(map/)
	itemdb.h 修正
	itemdb.c
		do_init_itemdb()、itemdb_search() 修正
		itemdb_read_noequip 追加
	pc.c
		pc_checkitem()、pc_isequip() 修正

--------------------
//0764 by 死神

・全てのダメージが1になる防御を10000から1000000に変更。
・battle_athena.confに項目追加。
・モンスターから経験値を貰う処理を本鯖のように修正。
・スキルスローポイズン実装。
・交換バグ修正。
・その他細かい修正。
・テストは殆どしてません。
	(db/)
	mob_db.txt 修正。
	skill_db.txt 修正。
	(doc/)
	conf_ref.txt 修正。
	db_ref.txt 修正。
	(conf/)
	battle_athena.conf 修正。
	(map/)
	makefile 修正。
	battle.h 修正。
	battle.c
		battle_get_def()、battle_get_mdef() 修正。
		battle_calc_pet_weapon_attack()、battle_calc_mob_weapon_attack() 修正。
		battle_calc_pc_weapon_attack()、battle_calc_magic_attack() 修正。
		battle_calc_misc_attack()、battle_config_read() 修正。
	skill.h 修正。
	skill.c
		skill_castend_nodamage_id()、skill_castend_damage_id() 修正。
		skill_check_condition()、skill_status_change_timer() 修正。
		skill_status_change_end()、skill_status_change_start() 修正。
		skill_additional_effect()、skill_produce_mix()、skill_unit_timer_sub() 修正。
		skill_check_unit_sub()を skill_check_unit_range_sub()に変更。
		skill_check_unit_range() 追加。
		skill_castend_pos()、skill_area_sub_count() 修正。
	mob.c
		mobskill_castend_pos()、mob_damage() 修正。
	clif.c
		clif_parse_TradeRequest()、clif_parse_TradeAck() 修正。
		clif_parse_TradeAddItem()、clif_parse_TradeOk() 修正。
		clif_parse_TradeCansel()、clif_parse_TradeCommit() 修正。
	map.h 修正。
	map.c
		do_init() 修正。
	pc.c
		pc_calc_skilltree()、pc_calcstatus() 修正。
	tarde.c
		trade_tradeack() 修正。

--------------------
//0763 by 胡蝶蘭

・サーバーsnapshot
	フォルダを整理したので注意してください。
	以前のセーブデータ(account.txtなど)はsaveフォルダに置いてください
	cnfファイルは各種ファイルのパスが変わってるので、
	この古いものをコピーではなく、新しく書き換えなおしてください。

・フォルダ整理
	confフォルダ
		NPC関連をconf/npc/、MOB配置関連をconf/mob/、WARP関連をconf/warp/
		テストやサンプルをconf/sample/に移動しました。
	dbフォルダ
		sampleフォルダのうちdb関係を db/sampleに移動しました。
	help.txt/motd.txt
		confフォルダに移動しました
	account.txt/athena.txt/guild.txt/party.txt/pet.txt/storage.txt
		saveフォルダに移動しました
	tool/backup
		パス修正

・motd.txt/help.txtのパスをmap_athena.cnfで指定できるように
	map.h/map.c/atcommand.c/atcommand.h修正

・athena-startにrestartオプション追加
	./athena-start restartでAthenaを再起動します


--------------------

//0762以前の変更点はReadmeを参照してください

--------------------

    Athena Dev. v2.1.1       Released: Middle July, 2003
    (c) 2003 Athena Project.
     http://project-yare.de/

1. Athena(アテナ)について
2. このリリースについて
3. 必要な物
4. 使い方
5. 現在の仕様
6. 祝辞
7. 免責事項
8. 募集
9. English


1. アテナについて
    アテナとは2003年1月半ばにでた0052.lzhをベースとして作られているエミュレータの一つです。
    基本的なライセンスはオリジナルがGPLの下に配布されている為、
    これに従いGPLの下配布を許可します。
    /*
        改良版を配布する場合は必ずこのREADMEを書き換えてください。
        何処を改良したのか報告(athena@project-yare.deまで)して貰えると助かります。
        バイナリのみの配布はGPL違反ですので"必ず"ソースも添付してください。
     */
    動作の確認は以下の通りのみ行っています。
    // ただし完璧に動く事を保証するものでありません
    対象CPU: Intel Pentium系   // PentiumII以上で確認.
        FreeBSD 4.8R, 4.6.2R
        Linux RedHat 7.3
        cygwin + gcc 3.2 20020927 (prerelease)
    開発元URL: http://project-yare.de/


2. このリリースについて
    今回のリリースは前回(V2.1)同様開発版のリリースのみです。
    2.1に比べ下記の点が修正されています。
        mapのデフォルト設定が韓国data.grfのみ正常に動作するようになっていた点
        common/timer.cやmap/script.cの幾つかのバグ

    迅速にUpdateを強く推奨するものではありませんが各自の判断で行って下さい。


3. 必要な物
    data.grf      //sdata.grfは必要に応じて
    account.txt   //存在しない場合athena.shが自動生成します
    conf/*.cnf    //Map用とChar用の二種類あります
    conf/npc*.txt //npc設定用ファイルです。複数のファイルに分けることが可能です。
    db/*.txt      //アイテム、job情報など


4. 使い方
    > tar xvfz athena-d?.?.tar.gz
    > cd athena-d?.?.tar.gz
    > make
    > vi conf/char_athena.cnf       //IP(127.0.0.1)の部分を環境に合わせて変更してください
    > vi conf/map_athena.cnf        //同上、またmap設定などは、このファイルで行います。
    > ./athena.sh
    上記を行えば"たぶん"起動します。

    補足:
    conf/npc_sampleJ.txtにはスクリプトの書き方について色々な説明が記載されています。
    もし、独自のMap設定を行ってみたい人や、スクリプトを弄りたい方は参考にしてください。
    ただし、開発中のためスクリプトの仕様が変更される可能性が高いです。
    command.txtには実装済みの特殊コマンドについての説明を記載しています。


5. 現在の仕様
    本鯖と比べておかしい(例えばプバが歩く、ポリンがアイテムを拾わないなど)点は、
    全て現在開発中に因るものです。
    現状としてキャラクタ系及びモンスター系のバグ報告は無視される可能性が高いです。

    バグ報告について必ず発生条件をお書き下さい。
    下にある報告用テンプレートを使って報告して頂くと助かります。
    報告先はエミュ板の開発スレにでも。
    ---- Athena v 2.0 (stable or develop) ----
    【gcc ver】gcc -vを実行時に表示される内容
    【動作システム】FreeBSD, Linux(ディストリビュージョンも), cygwinなど
    【発生内容】mapが落ちてしまった時の表示されていたデバッグ情報など具体的に書いてください。
    【操作内容】具体的にどんな操作を行ったかを書いてください。
    ------------------ END -------------------
    理想はテンプレに加えてmap.coreなどcoreファイルをUploaderにアップして頂くことですが
    問題のMapだけの状態にしcoreの吐く容量に注意してください。
    /*
        確認した限りでは324個ほどmapデータを読み込ませると、
         40MB近いcoreファイルを吐き出します @FreeBSD
         cygwinの場合はstackdumpというファイルになるそうです。
        しかし、coreファイルなどをgzip圧縮などすれば大幅に小さくなります。
         大凡30MBのcoreファイルが2.9MBほどになるようです。
        ですので、もしアップロードする場合はgzip圧縮など各自行ってください。
     */

    今回のリリースだけでなくHISTORYを作成すると大量に記述が必要な為省略しています。
    // 多い日だと本当に結構ありますので‥‥。


6. 祝辞
    今回このAthena開発版を出すに当たって感謝したい方々(順番不同)
        Lemming氏 (Project YARE)
        0052氏 (Uploader)
        35氏 (エミュ開発スレ)
        Johan Lindh氏(Author of memwatch)
        YARE forumのNPC情報を作成した方々
        weiss研究会BBSの様々な情報ファイルを作成した方々
        最後に、.coreファイル達


7. 免責事項
    Athena Projectは一切Athenaの動作に関する保証等は行いません。
    つまり、Athenaは無保証です。
    athena@project-yare.deに動作・操作等に関する質問などを送られても一切お答えできません。
    又Athenaを用いたことにより生じた被害・問題等の責任は一切Athena Projectは負いません。


8. 募集
    athenaの開発に参加したい//興味があるという方ご連絡下さい。
    我々は貴方の参加をお待ちしています。
    // 最新版が欲しいだけで何ら協力して頂けないという方はお断りです;-)
    [募集要項: プログラマ(2-3人)]
        年齢: 不問
        性別: 不問
        言語: 日本語が理解可能
        内容: C言語もしくはC++による開発。(特にネットワークやDBの経験が有る方大募集!)
    [募集要項: 翻訳(?人)]
        年齢: 不問
        性別: 不問
        言語: 日本語、英語が理解可能
        内容: 仏蘭西語、独逸語、西班牙語、伊太利亜語、泰(タイ)語、朝鮮語、中国語へ文献、サイトなどの翻訳
    連絡先: athena@project-yare.de 雑務担当まで。


9. English
     This release is just fixed some bugs in timer.c, script.c and map_athena1.conf.


(c) 2003 Athena Project.
